replicaCount: 1

app: pgbouncer
image:
  repository: edoburu/pgbouncer
  tag: v1.24.1-p1
  pullPolicy: IfNotPresent

auth:
  username: user
  password: securepassword

pgbouncer:
  config: |
    [databases]
    blog = host=postgres dbname=blog user=user password=securepassword port=5431

    [pgbouncer]
    listen_addr = 0.0.0.0
    listen_port = 6432
    auth_type = any
    auth_file = /etc/pbbouncer/userlist.txt
    pool_mode = session
    max_client_conn = 150
    default_pool_size = 200
    admin_users = pgbouncer
    stats_users = pgbouncer
    so_reuseport = 1
    query_wait_timeout = 0

  userlist: |
    "user" "securepassword"

service:
  type: ClusterIP
  port: 6432

metrics:
  user: pgbouncer
  password: pgbouncer

database:
  host: postgres
  name: blog
  user: user
  password: securepassword
  port: 5431
  pgport: 6432
